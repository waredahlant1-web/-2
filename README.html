<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø±Ø¯ ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ†</title>
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --success-color: #27ae60;
            --danger-color: #e74c3c;
            --warning-color: #f39c12;
            --light-bg: #f8f9fa;
            --white: #ffffff;
            --shadow: 0 2px 10px rgba(0,0,0,0.08);
            --radius: 10px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Cairo', 'Segoe UI', sans-serif;
        }

        body {
            background-color: var(--light-bg);
            color: #333;
            direction: rtl;
            font-size: 14px;
            line-height: 1.6;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            padding: 15px;
        }

        .header {
            background: linear-gradient(135deg, var(--primary-color), #4a6491);
            color: var(--white);
            padding: 20px 15px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            text-align: center;
        }

        .header h1 {
            font-size: 1.5rem;
            margin-bottom: 8px;
            font-weight: 700;
        }

        .header p {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .dashboard {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .card {
            background: var(--white);
            padding: 15px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            min-height: 100px;
        }

        .card h3 {
            color: var(--primary-color);
            margin-bottom: 10px;
            font-size: 0.9rem;
            border-bottom: 2px solid var(--secondary-color);
            padding-bottom: 8px;
        }

        .card .value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--success-color);
            margin: 5px 0;
        }

        .card .value.negative {
            color: var(--danger-color);
        }

        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            background: var(--light-bg);
            border: 1px solid #ddd;
            border-bottom: none;
            margin-left: -1px;
            font-weight: 600;
            color: var(--primary-color);
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .tab.active {
            background: var(--secondary-color);
            color: var(--white);
            border-color: var(--secondary-color);
            position: relative;
            top: 2px;
        }

        .section {
            background: var(--white);
            border-radius: var(--radius);
            padding: 20px 15px;
            box-shadow: var(--shadow);
            margin-bottom: 15px;
        }

        .section-title {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.2rem;
            padding-bottom: 8px;
            border-bottom: 2px solid var(--secondary-color);
            font-weight: 700;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: var(--primary-color);
            font-size: 0.9rem;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.3s;
            background: var(--white);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .form-control:hover {
            border-color: #bbb;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 4px;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-height: 44px;
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-primary {
            background-color: var(--secondary-color);
            color: var(--white);
        }

        .btn-primary:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn-success {
            background-color: var(--success-color);
            color: var(--white);
        }

        .btn-success:hover {
            background-color: #219653;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn-danger {
            background-color: var(--danger-color);
            color: var(--white);
        }

        .btn-danger:hover {
            background-color: #c0392b;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn-warning {
            background-color: var(--warning-color);
            color: var(--white);
        }

        .btn-warning:hover {
            background-color: #d68910;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .btn-group {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
        }

        .btn-group .btn {
            flex: 1;
            min-width: 120px;
        }

        .table-container {
            overflow-x: auto;
            margin-top: 15px;
            -webkit-overflow-scrolling: touch;
            border-radius: 8px;
            border: 1px solid #ddd;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            min-width: 600px;
        }

        th, td {
            padding: 12px 8px;
            text-align: center;
            border-bottom: 1px solid #ddd;
            font-size: 0.85rem;
        }

        th {
            background-color: var(--primary-color);
            color: var(--white);
            font-weight: 600;
            position: sticky;
            left: 0;
        }

        tr:hover {
            background-color: #f5f5f5;
        }

        .mobile-actions {
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .mobile-actions .btn {
            padding: 6px 12px;
            font-size: 0.8rem;
            min-width: 60px;
            min-height: 36px;
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            padding: 15px;
            overflow-y: auto;
        }

        .modal-content {
            background-color: var(--white);
            margin: auto;
            padding: 25px;
            border-radius: var(--radius);
            width: 100%;
            max-width: 500px;
            box-shadow: 0 8px 25px rgba(0,0,0,0.2);
            animation: modalSlide 0.3s ease-out;
            position: relative;
        }

        @keyframes modalSlide {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.3rem;
            color: var(--primary-color);
            font-weight: 700;
        }

        .close {
            font-size: 28px;
            cursor: pointer;
            color: #7f8c8d;
            transition: color 0.3s;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close:hover {
            color: var(--danger-color);
            background-color: #f8f9fa;
        }

        .search-container {
            margin-bottom: 20px;
            background: var(--white);
            padding: 20px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .search-box {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .search-input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            background: var(--white);
            transition: all 0.3s;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .search-btn {
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 0 25px;
            cursor: pointer;
            font-size: 1rem;
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 70px;
            transition: all 0.3s;
        }

        .search-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .search-btn:active {
            transform: translateY(0);
        }

        .search-filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .search-filter {
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            user-select: none;
            padding: 5px;
            border-radius: 6px;
            transition: background 0.3s;
        }

        .search-filter:hover {
            background: #f8f9fa;
        }

        .search-filter input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
            accent-color: var(--secondary-color);
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            display: none;
            font-size: 0.9rem;
            animation: slideDown 0.3s ease-out;
        }

        @keyframes slideDown {
            from { transform: translateY(-10px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .alert-success {
            background-color: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-danger {
            background-color: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .alert-info {
            background-color: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .product-details {
            background-color: var(--light-bg);
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-right: 4px solid var(--secondary-color);
            animation: fadeIn 0.5s ease-out;
        }

        .product-details h4 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.1rem;
        }

        .details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        @media (min-width: 480px) {
            .details-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        .detail-item {
            padding: 12px;
            background: var(--white);
            border-radius: 6px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.08);
            transition: transform 0.3s;
        }

        .detail-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        .detail-label {
            font-weight: 600;
            color: var(--primary-color);
            display: block;
            margin-bottom: 5px;
            font-size: 0.85rem;
        }

        .detail-value {
            color: var(--success-color);
            font-weight: bold;
            font-size: 0.9rem;
        }

        .export-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .export-buttons {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .export-buttons .btn {
            padding: 12px 10px;
            font-size: 0.85rem;
            min-height: 50px;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #7f8c8d;
            border-top: 1px solid #ddd;
            font-size: 0.85rem;
            background: var(--white);
            border-radius: var(--radius);
        }

        .file-upload {
            position: relative;
            display: block;
            cursor: pointer;
            margin: 15px 0;
        }

        .file-upload input[type="file"] {
            position: absolute;
            left: 0;
            top: 0;
            opacity: 0;
            width: 100%;
            height: 100%;
            cursor: pointer;
        }

        .file-upload-label {
            display: block;
            padding: 15px;
            background: var(--secondary-color);
            color: var(--white);
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px dashed var(--secondary-color);
        }

        .file-upload-label:hover {
            background: #2980b9;
            border-color: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .file-upload-label:active {
            transform: translateY(0);
        }

        .file-upload-label i {
            font-size: 1.2rem;
            margin-left: 8px;
        }

        .csv-instructions {
            background: #fff3cd;
            border: 2px solid #ffeaa7;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 0.85rem;
        }

        .csv-instructions h5 {
            color: #856404;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .csv-preview {
            max-height: 250px;
            overflow-y: auto;
            margin: 20px 0;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 0.8rem;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .tab-content {
            display: none;
            animation: fadeIn 0.5s ease-out;
        }

        .tab-content.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .currency {
            font-family: 'Arial', sans-serif;
            font-weight: bold;
        }

        .empty-state {
            text-align: center;
            padding: 50px 20px;
            color: #7f8c8d;
        }

        .empty-state i {
            font-size: 3rem;
            margin-bottom: 15px;
            color: #ddd;
        }

        .empty-state h3 {
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .price-toggle {
            margin-bottom: 15px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }

        .toggle-switch {
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            user-select: none;
        }

        .toggle-switch input[type="checkbox"] {
            display: none;
        }

        .toggle-slider {
            position: relative;
            width: 54px;
            height: 28px;
            background-color: #ccc;
            border-radius: 34px;
            transition: .4s;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            border-radius: 50%;
            transition: .4s;
        }

        input:checked + .toggle-slider {
            background-color: var(--success-color);
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }

        .operations-tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 2px solid #ddd;
            overflow-x: auto;
        }

        .operation-tab {
            padding: 10px 15px;
            cursor: pointer;
            background: var(--light-bg);
            border: 1px solid #ddd;
            border-bottom: none;
            margin-left: -1px;
            font-weight: 600;
            color: var(--primary-color);
            transition: all 0.3s;
            flex-shrink: 0;
        }

        .operation-tab.active {
            background: var(--secondary-color);
            color: var(--white);
            border-color: var(--secondary-color);
            position: relative;
            top: 2px;
        }

        .operation-badge {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.75rem;
            font-weight: bold;
            margin-right: 5px;
        }

        .badge-sale {
            background-color: var(--success-color);
            color: white;
        }

        .badge-add {
            background-color: var(--secondary-color);
            color: white;
        }

        .badge-remove {
            background-color: var(--danger-color);
            color: white;
        }

        .badge-edit {
            background-color: var(--warning-color);
            color: white;
        }

        .badge-import {
            background-color: #9b59b6;
            color: white;
        }

        .operations-table {
            font-size: 0.8rem;
        }

        .operations-table th:nth-child(1) { width: 5%; }
        .operations-table th:nth-child(2) { width: 10%; }
        .operations-table th:nth-child(3) { width: 15%; }
        .operations-table th:nth-child(4) { width: 10%; }
        .operations-table th:nth-child(5) { width: 10%; }
        .operations-table th:nth-child(6) { width: 10%; }
        .operations-table th:nth-child(7) { width: 15%; }
        .operations-table th:nth-child(8) { width: 15%; }
        .operations-table th:nth-child(9) { width: 10%; }

        .operations-table td {
            vertical-align: middle;
            padding: 10px 5px;
        }

        .operation-details {
            font-size: 0.75rem;
            color: #666;
            margin-top: 3px;
        }

        .operation-revert {
            background: transparent;
            border: 2px solid var(--danger-color);
            color: var(--danger-color);
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.75rem;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .operation-revert:hover {
            background: var(--danger-color);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .operation-revert:active {
            transform: translateY(0);
        }

        .operations-filter {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-select {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 6px;
            background: white;
            min-width: 150px;
            font-size: 0.9rem;
            transition: all 0.3s;
        }

        .filter-select:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .filter-btn {
            padding: 10px 20px;
            background: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9rem;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .filter-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .filter-btn:active {
            transform: translateY(0);
        }

        .statistics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (min-width: 768px) {
            .statistics {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-card {
            background: var(--white);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            box-shadow: var(--shadow);
            border: 1px solid #eee;
        }

        .stat-value {
            font-size: 1.4rem;
            font-weight: bold;
            color: var(--primary-color);
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: #666;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 30px;
            background: var(--white);
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #eee;
        }

        .loading i {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--secondary-color);
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .file-info {
            margin-top: 15px;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #ddd;
            font-size: 0.9rem;
            animation: slideDown 0.3s ease-out;
        }

        .file-info strong {
            color: var(--primary-color);
        }

        .retail-price-column {
            transition: all 0.3s;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© Ø¬Ø¯Ø§Ù‹ */
        @media (max-width: 360px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
            
            .details-grid {
                grid-template-columns: 1fr;
            }
            
            .export-buttons {
                grid-template-columns: 1fr;
            }
            
            .statistics {
                grid-template-columns: 1fr;
            }
            
            .search-box {
                flex-direction: column;
            }
            
            .search-btn {
                width: 100%;
            }
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„Ù…Ø³ */
        @media (hover: none) and (pointer: coarse) {
            .btn, .tab {
                min-height: 48px;
            }
            
            .form-control {
                min-height: 48px;
            }
            
            th, td {
                padding: 12px 6px;
            }
            
            .mobile-actions .btn {
                min-height: 40px;
                min-width: 70px;
            }
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¹Ø§Ù…Ø© */
        input[type="number"]::-webkit-inner-spin-button,
        input[type="number"]::-webkit-outer-spin-button {
            opacity: 1;
            height: 30px;
        }

        .form-control::placeholder {
            color: #999;
            font-size: 0.9rem;
        }

        textarea.form-control {
            resize: vertical;
            min-height: 80px;
            max-height: 150px;
        }

        /* ØªØ£Ø«ÙŠØ±Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· */
        .btn:active, .search-btn:active, .filter-btn:active {
            transform: translateY(0) !important;
        }

        /* ØªØ­Ø³ÙŠÙ†Ø§Øª Ù„Ù„ØµÙˆØ±Ø§Øª */
        .btn:disabled, .search-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none !important;
        }

        .btn:disabled:hover {
            background-color: inherit !important;
            box-shadow: none !important;
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>ğŸ“¦ Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ§Ù„Ø¬Ø±Ø¯</h1>
            <p>Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª ÙˆØ§Ù„Ù…Ø®Ø²ÙˆÙ† ÙˆØ­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</p>
        </header>

        <div class="dashboard">
            <div class="card">
                <h3>Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„ Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ</h3>
                <div id="totalCapital" class="value">0 <span class="currency">$</span></div>
                <p>Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨Ø§Ù„Ø¬Ù…Ù„Ø©</p>
            </div>
            
            <div class="card">
                <h3>Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©</h3>
                <div id="monthlyProfit" class="value">0 <span class="currency">$</span></div>
                <p>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø£Ø±Ø¨Ø§Ø­ Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</p>
            </div>
            
            <div class="card">
                <h3>Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h3>
                <div id="totalProducts" class="value">0 Ù…Ù†ØªØ¬</div>
                <p>Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª Ø¨Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</p>
            </div>
            
            <div class="card">
                <h3>Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ø³ÙˆÙ‚ÙŠØ©</h3>
                <div id="marketValue" class="value">0 <span class="currency">$</span></div>
                <p>Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† Ø¨Ø§Ù„Ø¨ÙŠØ¹</p>
            </div>
        </div>

        <!-- ØªØ¨ÙˆÙŠØ¨Ø§Øª Ø§Ù„Ø¥Ø¶Ø§ÙØ© -->
        <div class="tabs">
            <div class="tab active" onclick="switchTab('manualTab')">
                <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© ÙŠØ¯ÙˆÙŠØ©
            </div>
            <div class="tab" onclick="switchTab('importTab')">
                <i class="fas fa-file-import"></i> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Ù…Ù„Ù
            </div>
            <div class="tab" onclick="switchTab('searchTab')">
                <i class="fas fa-search"></i> Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬
            </div>
            <div class="tab" onclick="switchTab('operationsTab')">
                <i class="fas fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
            </div>
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø£ÙˆÙ„: Ø§Ù„Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙŠØ¯ÙˆÙŠØ© -->
        <div id="manualTab" class="tab-content active">
            <div class="section">
                <h2 class="section-title"><i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯</h2>
                
                <div id="alertMessage" class="alert" style="display: none;"></div>
                
                <div class="form-group">
                    <label for="productName"><i class="fas fa-box"></i> Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬:</label>
                    <input type="text" id="productName" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬" value="Ù‡Ø§ØªÙ Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬">
                </div>
                
                <div class="form-group">
                    <label for="productDescription"><i class="fas fa-align-left"></i> ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬:</label>
                    <textarea id="productDescription" class="form-control" rows="2" placeholder="Ø£Ø¯Ø®Ù„ ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬">Ù‡Ø§ØªÙ Ø°ÙƒÙŠ Ø¨Ø´Ø§Ø´Ø© 6.5 Ø¨ÙˆØµØ©</textarea>
                </div>
                
                <div class="form-group">
                    <label for="wholesalePrice"><i class="fas fa-tag"></i> Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø© (Ø±Ø£Ø³ Ø§Ù„Ù…Ø§Ù„):</label>
                    <div style="position: relative;">
                        <input type="number" id="wholesalePrice" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©" step="0.01" value="800">
                        <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #666; font-weight: bold;">$</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="retailPrice"><i class="fas fa-dollar-sign"></i> Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹:</label>
                    <div style="position: relative;">
                        <input type="number" id="retailPrice" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹" step="0.01" value="1200">
                        <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #666; font-weight: bold;">$</span>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="quantity"><i class="fas fa-cubes"></i> Ø§Ù„ÙƒÙ…ÙŠØ©:</label>
                    <input type="number" id="quantity" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ©" value="10">
                </div>
                
                <div class="btn-group">
                    <button onclick="addProduct()" class="btn btn-success">
                        <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬
                    </button>
                    <button onclick="clearForm()" class="btn btn-warning">
                        <i class="fas fa-trash"></i> Ù…Ø³Ø­ Ø§Ù„Ø­Ù‚ÙˆÙ„
                    </button>
                </div>
            </div>
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø«Ø§Ù†ÙŠ: Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù† Ù…Ù„Ù -->
        <div id="importTab" class="tab-content">
            <div class="section">
                <h2 class="section-title"><i class="fas fa-file-import"></i> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ù…Ù†ØªØ¬Ø§Øª Ù…Ù† Ù…Ù„Ù</h2>
                
                <div class="csv-instructions">
                    <h5><i class="fas fa-info-circle"></i> ØªØ¹Ù„ÙŠÙ…Ø§Øª ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ù…Ù„Ù:</h5>
                    <div style="display: flex; gap: 15px; margin-top: 10px; flex-wrap: wrap;">
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <i class="fas fa-check-circle" style="color: var(--success-color);"></i>
                            <span>ÙŠØ¯Ø¹Ù… Ù…Ù„ÙØ§Øª Excel (XLSX) Ùˆ CSV</span>
                        </div>
                        <div style="display: flex; align-items: center; gap: 5px;">
                            <i class="fas fa-check-circle" style="color: var(--success-color);"></i>
                            <span>Ø§Ù„Ø¹Ù†Ø§ÙˆÙŠÙ† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ÙÙŠ Ø§Ù„Ø³Ø·Ø± Ø§Ù„Ø£ÙˆÙ„</span>
                        </div>
                    </div>
                    <ul style="padding-right: 15px; margin-top: 10px;">
                        <li><strong>Ø§Ù„Ø§Ø³Ù…, Ø§Ù„ÙˆØµÙ, Ø³Ø¹Ø±_Ø§Ù„Ø¬Ù…Ù„Ø©, Ø³Ø¹Ø±_Ø§Ù„Ø¨ÙŠØ¹, Ø§Ù„ÙƒÙ…ÙŠØ©</strong></li>
                        <li>ÙŠÙ…ÙƒÙ†Ùƒ <a href="#" onclick="downloadSampleCSV()" style="color: #3498db; text-decoration: none; font-weight: bold;">ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ CSV</a> ÙƒÙ…Ø±Ø¬Ø¹</li>
                        <li>ÙŠÙ…ÙƒÙ†Ùƒ <a href="#" onclick="downloadSampleExcel()" style="color: #3498db; text-decoration: none; font-weight: bold;">ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Excel</a> ÙƒÙ…Ø±Ø¬Ø¹</li>
                    </ul>
                </div>
                
                <div class="form-group">
                    <label><i class="fas fa-file-upload"></i> Ø§Ø®ØªØ± Ù…Ù„Ù:</label>
                    <div class="file-upload">
                        <input type="file" id="fileInput" accept=".csv,.xlsx,.xls" onchange="previewFile()">
                        <span class="file-upload-label">
                            <i class="fas fa-folder-open"></i> Ø§Ø®ØªØ± Ù…Ù„Ù (CSV Ø£Ùˆ Excel)
                        </span>
                    </div>
                    <div id="fileInfo" class="file-info" style="display: none;"></div>
                </div>
                
                <div id="loading" class="loading" style="display: none;">
                    <i class="fas fa-spinner"></i>
                    <p>Ø¬Ø§Ø±ÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„Ù...</p>
                </div>
                
                <div id="filePreview" class="csv-preview" style="display: none;"></div>
                
                <div class="btn-group">
                    <button onclick="importFile()" class="btn btn-success" id="importFileBtn" disabled>
                        <i class="fas fa-download"></i> Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                    </button>
                    <button onclick="clearFilePreview()" class="btn btn-warning">
                        <i class="fas fa-times"></i> Ù…Ø³Ø­ Ø§Ù„Ù…Ø¹Ø§ÙŠÙ†Ø©
                    </button>
                </div>
            </div>
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø«Ø§Ù„Ø«: Ø§Ù„Ø¨Ø­Ø« -->
        <div id="searchTab" class="tab-content">
            <div class="section">
                <h2 class="section-title"><i class="fas fa-search"></i> Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬</h2>
                
                <div class="search-container">
                    <div class="search-box">
                        <input type="text" id="searchInput" class="search-input" placeholder="Ø§Ø¨Ø­Ø« Ø¨Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬ Ø£Ùˆ Ø§Ù„Ù€ ID...">
                        <button onclick="performSearch()" class="search-btn">
                            <i class="fas fa-search"></i> Ø¨Ø­Ø«
                        </button>
                    </div>
                    
                    <div class="search-filters">
                        <div class="search-filter">
                            <input type="checkbox" id="searchByName" checked>
                            <label for="searchByName">Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ø§Ø³Ù…</label>
                        </div>
                        <div class="search-filter">
                            <input type="checkbox" id="searchByID">
                            <label for="searchByID">Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„Ù€ ID</label>
                        </div>
                        <div class="search-filter">
                            <input type="checkbox" id="searchByDesc">
                            <label for="searchByDesc">Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ù„ÙˆØµÙ</label>
                        </div>
                    </div>
                </div>
                
                <div id="productDetails" class="product-details" style="display: none;">
                    <h4><i class="fas fa-info-circle"></i> ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬</h4>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„Ø§Ø³Ù…:</span>
                            <span class="detail-value" id="detailName"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„ÙƒÙ…ÙŠØ©:</span>
                            <span class="detail-value" id="detailQuantity"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©:</span>
                            <span class="detail-value" id="detailWholesale"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹:</span>
                            <span class="detail-value" id="detailRetail"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„Ù‚ÙŠÙ…Ø©:</span>
                            <span class="detail-value" id="detailValue"></span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ø§Ù„Ø±Ø¨Ø­ Ø§Ù„Ù…ØªÙˆÙ‚Ø¹:</span>
                            <span class="detail-value" id="detailProfit"></span>
                        </div>
                    </div>
                    
                    <div class="btn-group">
                        <button onclick="showSellModal()" class="btn btn-primary">
                            <i class="fas fa-shopping-cart"></i> Ø¨ÙŠØ¹ Ù‚Ø·Ø¹Ø©
                        </button>
                        <button onclick="removePiece()" class="btn btn-danger">
                            <i class="fas fa-minus"></i> Ø¥Ø²Ø§Ù„Ø© Ù‚Ø·Ø¹Ø©
                        </button>
                        <button onclick="addPiece()" class="btn btn-success">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ù‚Ø·Ø¹Ø©
                        </button>
                    </div>
                </div>

                <div id="searchResults" style="display: none;">
                    <h4 class="section-title"><i class="fas fa-list"></i> Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h4>
                    <div class="table-container">
                        <table id="searchResultsTable">
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                                    <th>Ø§Ù„ÙˆØµÙ</th>
                                    <th>Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©</th>
                                    <th class="retail-price-column">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
                                    <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                    <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                                    <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                                </tr>
                            </thead>
                            <tbody id="searchResultsBody">
                                <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø« Ù‡Ù†Ø§ -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ù…Ø­ØªÙˆÙ‰ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø§Ù„Ø±Ø§Ø¨Ø¹: Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª -->
        <div id="operationsTab" class="tab-content">
            <div class="section">
                <h2 class="section-title"><i class="fas fa-history"></i> Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</h2>
                
                <div class="statistics">
                    <div class="stat-card">
                        <div class="stat-value" id="totalOperations">0</div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="salesCount">0</div>
                        <div class="stat-label">Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø¨ÙŠØ¹</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="profitTotal">0 <span class="currency">$</span></div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ø£Ø±Ø¨Ø§Ø­</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="revenueTotal">0 <span class="currency">$</span></div>
                        <div class="stat-label">Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø§Ù„Ù…Ø¨ÙŠØ¹Ø§Øª</div>
                    </div>
                </div>
                
                <div class="operations-filter">
                    <div class="filter-group">
                        <label for="operationTypeFilter"><i class="fas fa-filter"></i> Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:</label>
                        <select id="operationTypeFilter" class="filter-select" onchange="filterOperations()">
                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª</option>
                            <option value="sale">Ø§Ù„Ø¨ÙŠØ¹</option>
                            <option value="add">Ø§Ù„Ø¥Ø¶Ø§ÙØ©</option>
                            <option value="remove">Ø§Ù„Ø¥Ø²Ø§Ù„Ø©</option>
                            <option value="edit">Ø§Ù„ØªØ¹Ø¯ÙŠÙ„</option>
                            <option value="import">Ø§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯</option>
                        </select>
                    </div>
                    
                    <div class="filter-group">
                        <label for="dateFilter"><i class="fas fa-calendar"></i> Ø§Ù„ØªØ§Ø±ÙŠØ®:</label>
                        <select id="dateFilter" class="filter-select" onchange="filterOperations()">
                            <option value="all">Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø£ÙŠØ§Ù…</option>
                            <option value="today">Ø§Ù„ÙŠÙˆÙ…</option>
                            <option value="yesterday">Ø£Ù…Ø³</option>
                            <option value="week">Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹</option>
                            <option value="month">Ù‡Ø°Ø§ Ø§Ù„Ø´Ù‡Ø±</option>
                        </select>
                    </div>
                    
                    <button onclick="clearOperationsFilters()" class="filter-btn">
                        <i class="fas fa-times"></i> Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±
                    </button>
                    
                    <button onclick="clearAllOperations()" class="btn btn-danger" style="margin-right: auto;">
                        <i class="fas fa-trash"></i> Ø­Ø°Ù Ø§Ù„Ø³Ø¬Ù„
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="operations-table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Ø§Ù„Ù†ÙˆØ¹</th>
                                <th>Ø§Ù„Ù…Ù†ØªØ¬</th>
                                <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                <th>Ø§Ù„Ø³Ø¹Ø±</th>
                                <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                                <th>Ø§Ù„Ø±Ø¨Ø­</th>
                                <th>Ø§Ù„ØªØ§Ø±ÙŠØ®</th>
                                <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                            </tr>
                        </thead>
                        <tbody id="operationsTableBody">
                            <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù‡Ù†Ø§ -->
                        </tbody>
                    </table>
                </div>
                
                <div class="btn-group">
                    <button onclick="exportOperationsToExcel()" class="btn btn-success">
                        <i class="fas fa-file-excel"></i> ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel
                    </button>
                    <button onclick="exportOperationsToPDF()" class="btn btn-danger">
                        <i class="fas fa-file-pdf"></i> ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ PDF
                    </button>
                    <button onclick="printOperations()" class="btn btn-primary">
                        <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø³Ø¬Ù„
                    </button>
                </div>
            </div>
        </div>

        <!-- Ù‚Ø³Ù… Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª -->
        <div class="section">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; flex-wrap: wrap; gap: 10px;">
                <h2 class="section-title" style="margin: 0;"><i class="fas fa-list"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª</h2>
                <div class="price-toggle">
                    <div class="toggle-switch">
                        <input type="checkbox" id="priceToggle" checked onchange="toggleRetailPrice()">
                        <span class="toggle-slider"></span>
                        <span>Ø¥Ø¸Ù‡Ø§Ø± Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</span>
                    </div>
                </div>
            </div>
            
            <div class="table-container">
                <table id="productsTable">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Ø§Ù„Ø§Ø³Ù…</th>
                            <th>Ø§Ù„ÙˆØµÙ</th>
                            <th>Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©</th>
                            <th class="retail-price-column">Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
                            <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                            <th>Ø§Ù„Ù‚ÙŠÙ…Ø©</th>
                            <th>Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                    </tbody>
                </table>
            </div>
            
            <div class="export-buttons">
                <button onclick="exportToExcel()" class="btn btn-success">
                    <i class="fas fa-file-excel"></i> Excel
                </button>
                <button onclick="exportToCSV()" class="btn btn-primary">
                    <i class="fas fa-file-csv"></i> CSV
                </button>
                <button onclick="exportToJSON()" class="btn btn-warning">
                    <i class="fas fa-file-code"></i> JSON
                </button>
                <button onclick="exportBackup()" class="btn" style="background-color: #9b59b6; color: white;">
                    <i class="fas fa-save"></i> Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©
                </button>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="clearAllData()" class="btn btn-danger">
                    <i class="fas fa-trash-alt"></i> Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
                </button>
            </div>
        </div>

        <div class="footer">
            <p>Â© 2024 Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ† | ØªÙ… Ø§Ù„ØªØ·ÙˆÙŠØ± Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… HTML Ùˆ JavaScript</p>
            <p>ÙŠØ¯Ø¹Ù… Ù…Ù„ÙØ§Øª Excel Ùˆ CSV | Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ø­ÙÙˆØ¸Ø© Ù…Ø­Ù„ÙŠØ§Ù‹ ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­</p>
        </div>
    </div>

    <!-- Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨ÙŠØ¹ -->
    <div id="sellModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-cash-register"></i> Ø¨ÙŠØ¹ Ù…Ù†ØªØ¬</h3>
                <span class="close" onclick="closeModal()">&times;</span>
            </div>
            <div id="modalProductInfo"></div>
            <div class="form-group">
                <label for="sellPrice"><i class="fas fa-dollar-sign"></i> Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹:</label>
                <div style="position: relative;">
                    <input type="number" id="sellPrice" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹" step="0.01">
                    <span style="position: absolute; left: 10px; top: 50%; transform: translateY(-50%); color: #666; font-weight: bold;">$</span>
                </div>
            </div>
            <div class="form-group">
                <label for="sellQuantity"><i class="fas fa-cubes"></i> Ø§Ù„ÙƒÙ…ÙŠØ© Ù„Ù„Ø¨ÙŠØ¹:</label>
                <input type="number" id="sellQuantity" class="form-control" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ÙƒÙ…ÙŠØ©" value="1">
            </div>
            <div class="btn-group">
                <button onclick="sellProduct()" class="btn btn-success">
                    <i class="fas fa-check"></i> ØªØ£ÙƒÙŠØ¯ Ø§Ù„Ø¨ÙŠØ¹
                </button>
                <button onclick="closeModal()" class="btn btn-danger">
                    <i class="fas fa-times"></i> Ø¥Ù„ØºØ§Ø¡
                </button>
            </div>
        </div>
    </div>

    <script>
        // =============================
        // Ø§Ù„Ù…ØªØºÙŠØ±Ø§Øª Ø§Ù„Ø¹Ø§Ù…Ø©
        // =============================
        let products = [];
        let monthlyProfit = 0;
        let selectedProductId = null;
        let operationsHistory = [];
        let fileData = [];
        let showRetailPrice = true;
        let searchResults = [];

        // =============================
        // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚
        // =============================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚...');
            loadFromLocalStorage();
            updateDashboard();
            renderProductsTable();
            updateOperationsStatistics();
            renderOperationsTable();
            
            // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±
            if (products.length === 0) {
                console.log('Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±...');
                addSampleData();
            }
            
            console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¨Ù†Ø¬Ø§Ø­!');
            console.log('Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:', products.length);
            console.log('Ø¹Ø¯Ø¯ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:', operationsHistory.length);
        });

        // =============================
        // Ø¥Ø¶Ø§ÙØ© Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ©
        // =============================
        function addSampleData() {
            const sampleProducts = [
                {
                    id: generateId(),
                    name: 'Ù‡Ø§ØªÙ Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬',
                    description: 'Ù‡Ø§ØªÙ Ø°ÙƒÙŠ Ø¨Ø´Ø§Ø´Ø© 6.5 Ø¨ÙˆØµØ©',
                    wholesalePrice: 800,
                    retailPrice: 1200,
                    quantity: 10,
                    dateAdded: new Date().toISOString()
                },
                {
                    id: generateId(),
                    name: 'Ù„Ø§Ø¨ØªÙˆØ¨ Ø¯ÙŠÙ„',
                    description: 'Ù„Ø§Ø¨ØªÙˆØ¨ 15 Ø¨ÙˆØµØ© Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬ i7',
                    wholesalePrice: 2000,
                    retailPrice: 2800,
                    quantity: 5,
                    dateAdded: new Date().toISOString()
                },
                {
                    id: generateId(),
                    name: 'Ø³Ù…Ø§Ø¹Ø© Ø±Ø£Ø³',
                    description: 'Ø³Ù…Ø§Ø¹Ø© Ø±Ø£Ø³ Ù„Ø§Ø³Ù„ÙƒÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©',
                    wholesalePrice: 150,
                    retailPrice: 250,
                    quantity: 20,
                    dateAdded: new Date().toISOString()
                }
            ];

            sampleProducts.forEach(product => {
                products.push(product);
            });

            // ØªØ³Ø¬ÙŠÙ„ Ø¹Ù…Ù„ÙŠØ§Øª Ø¥Ø¶Ø§ÙØ© Ø¹ÙŠÙ†Ø©
            sampleProducts.forEach(product => {
                logOperation('add', product, product.quantity, product.retailPrice, 0, 0);
            });

            saveToLocalStorage();
            updateDashboard();
            renderProductsTable();
            showAlert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø¨ÙŠØ§Ù†Ø§Øª ØªØ¬Ø±ÙŠØ¨ÙŠØ© Ù„Ù„Ø§Ø®ØªØ¨Ø§Ø±', 'info');
        }

        // =============================
        // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø§Ù„ØªØ¨ÙˆÙŠØ¨Ø§Øª
        // =============================
        function switchTab(tabId) {
            console.log('ØªØ¨Ø¯ÙŠÙ„ Ø§Ù„ØªØ¨ÙˆÙŠØ¨ Ø¥Ù„Ù‰:', tabId);
            
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.getElementById(tabId).classList.add('active');
            event.target.closest('.tab').classList.add('active');
            
            if (tabId === 'searchTab') {
                setTimeout(() => {
                    document.getElementById('searchInput').focus();
                }, 100);
            } else if (tabId === 'operationsTab') {
                updateOperationsStatistics();
                renderOperationsTable();
            }
        }

        // =============================
        // Ø§Ù„ØªØ­ÙƒÙ… ÙÙŠ Ø¥Ø¸Ù‡Ø§Ø±/Ø¥Ø®ÙØ§Ø¡ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹
        // =============================
        function toggleRetailPrice() {
            showRetailPrice = document.getElementById('priceToggle').checked;
            console.log('Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹:', showRetailPrice ? 'Ù…Ø±Ø¦ÙŠ' : 'Ù…Ø®ÙÙŠ');
            
            const columns = document.querySelectorAll('.retail-price-column');
            
            if (showRetailPrice) {
                columns.forEach(col => col.style.display = 'table-cell');
            } else {
                columns.forEach(col => col.style.display = 'none');
            }
            
            renderProductsTable();
            
            if (document.getElementById('searchResults').style.display === 'block') {
                renderSearchResults(searchResults);
            }
        }

        // =============================
        // Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯ (ÙŠØ¯ÙˆÙŠ)
        // =============================
        function addProduct() {
            console.log('Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯...');
            
            const name = document.getElementById('productName').value.trim();
            const description = document.getElementById('productDescription').value.trim();
            const wholesalePrice = parseFloat(document.getElementById('wholesalePrice').value);
            const retailPrice = parseFloat(document.getElementById('retailPrice').value);
            const quantity = parseInt(document.getElementById('quantity').value);

            if (!name || !description || isNaN(wholesalePrice) || isNaN(retailPrice) || isNaN(quantity)) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ù…Ù„Ø¡ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­', 'danger');
                return;
            }

            if (wholesalePrice <= 0 || retailPrice <= 0 || quantity <= 0) {
                showAlert('Ø§Ù„Ù‚ÙŠÙ… ÙŠØ¬Ø¨ Ø£Ù† ØªÙƒÙˆÙ† Ø£ÙƒØ¨Ø± Ù…Ù† ØµÙØ±', 'danger');
                return;
            }

            const product = {
                id: generateId(),
                name: name,
                description: description,
                wholesalePrice: wholesalePrice,
                retailPrice: retailPrice,
                quantity: quantity,
                dateAdded: new Date().toISOString()
            };

            console.log('Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬:', product);
            products.push(product);
            
            logOperation('add', product, quantity, retailPrice, 0, 0);
            
            saveToLocalStorage();
            clearForm();
            updateDashboard();
            renderProductsTable();
            showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­!', 'success');
        }

        // =============================
        // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ù…Ù†ØªØ¬
        // =============================
        function performSearch() {
            console.log('Ø¨Ø¯Ø¡ Ø§Ù„Ø¨Ø­Ø«...');
            const searchTerm = document.getElementById('searchInput').value.trim();
            const searchByName = document.getElementById('searchByName').checked;
            const searchByID = document.getElementById('searchByID').checked;
            const searchByDesc = document.getElementById('searchByDesc').checked;

            if (!searchTerm) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù†Øµ Ù„Ù„Ø¨Ø­Ø«', 'danger');
                return;
            }

            searchResults = products.filter(product => {
                let match = false;
                const term = searchTerm.toLowerCase();

                if (searchByName && product.name.toLowerCase().includes(term)) match = true;
                if (searchByID && product.id.toLowerCase().includes(term)) match = true;
                if (searchByDesc && product.description.toLowerCase().includes(term)) match = true;

                return match;
            });

            console.log('Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«:', searchResults.length);

            if (searchResults.length === 0) {
                document.getElementById('productDetails').style.display = 'none';
                document.getElementById('searchResults').style.display = 'none';
                showAlert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ù†ØªØ§Ø¦Ø¬', 'info');
                return;
            }

            if (searchResults.length === 1) {
                showProductDetails(searchResults[0].id);
                document.getElementById('searchResults').style.display = 'none';
            } else {
                document.getElementById('productDetails').style.display = 'none';
                document.getElementById('searchResults').style.display = 'block';
                renderSearchResults(searchResults);
                showAlert(`ØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ${searchResults.length} Ù†ØªÙŠØ¬Ø©`, 'success');
            }
        }

        function renderSearchResults(results) {
            const tbody = document.getElementById('searchResultsBody');
            tbody.innerHTML = '';

            results.forEach((product, index) => {
                const totalValue = product.wholesalePrice * product.quantity;
                const row = document.createElement('tr');
                
                let retailPriceCell = '';
                if (showRetailPrice) {
                    retailPriceCell = `<td>${product.retailPrice.toFixed(2)} $</td>`;
                } else {
                    retailPriceCell = `<td style="display: none;">${product.retailPrice.toFixed(2)} $</td>`;
                }
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${product.name}</td>
                    <td title="${product.description}">${product.description.length > 20 ? product.description.substring(0, 20) + '...' : product.description}</td>
                    <td>${product.wholesalePrice.toFixed(2)} $</td>
                    ${retailPriceCell}
                    <td>${product.quantity}</td>
                    <td>${totalValue.toFixed(2)} $</td>
                    <td>
                        <div class="mobile-actions">
                            <button onclick="showProductDetailsFromSearch('${product.id}')" class="btn btn-primary">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button onclick="sellProductFromSearch('${product.id}')" class="btn btn-success">
                                <i class="fas fa-shopping-cart"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function showProductDetailsFromSearch(productId) {
            showProductDetails(productId);
            switchTab('searchTab');
        }

        function sellProductFromSearch(productId) {
            selectedProductId = productId;
            showSellModal();
        }

        // =============================
        // Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬
        // =============================
        function showProductDetails(productId) {
            console.log('Ø¹Ø±Ø¶ ØªÙØ§ØµÙŠÙ„ Ø§Ù„Ù…Ù†ØªØ¬:', productId);
            const product = products.find(p => p.id === productId);
            if (!product) return;

            selectedProductId = productId;
            
            document.getElementById('detailName').textContent = product.name;
            document.getElementById('detailQuantity').textContent = product.quantity;
            document.getElementById('detailWholesale').textContent = product.wholesalePrice.toFixed(2) + ' $';
            document.getElementById('detailRetail').textContent = product.retailPrice.toFixed(2) + ' $';
            document.getElementById('detailValue').textContent = (product.wholesalePrice * product.quantity).toFixed(2) + ' $';
            document.getElementById('detailProfit').textContent = ((product.retailPrice - product.wholesalePrice) * product.quantity).toFixed(2) + ' $';
            
            document.getElementById('productDetails').style.display = 'block';
            document.getElementById('searchInput').value = '';
            
            switchTab('searchTab');
        }

        // =============================
        // Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨ÙŠØ¹
        // =============================
        function showSellModal() {
            console.log('ÙØªØ­ Ù†Ø§ÙØ°Ø© Ø§Ù„Ø¨ÙŠØ¹ Ù„Ù„Ù…Ù†ØªØ¬:', selectedProductId);
            if (!selectedProductId) return;
            
            const product = products.find(p => p.id === selectedProductId);
            if (!product) return;
            
            document.getElementById('modalProductInfo').innerHTML = `
                <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <h4>${product.name}</h4>
                    <p><i class="fas fa-cubes"></i> Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…ØªØ§Ø­Ø©: <strong>${product.quantity}</strong></p>
                    <p><i class="fas fa-tag"></i> Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©: <strong>${product.wholesalePrice.toFixed(2)} $</strong></p>
                    <p><i class="fas fa-dollar-sign"></i> Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„Ù…Ù‚ØªØ±Ø­: <strong>${product.retailPrice.toFixed(2)} $</strong></p>
                </div>
            `;
            
            document.getElementById('sellPrice').value = product.retailPrice;
            document.getElementById('sellQuantity').max = product.quantity;
            document.getElementById('sellQuantity').value = 1;
            document.getElementById('sellModal').style.display = 'block';
        }

        // =============================
        // ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹
        // =============================
        function sellProduct() {
            console.log('ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹...');
            if (!selectedProductId) return;
            
            const product = products.find(p => p.id === selectedProductId);
            if (!product) return;
            
            const sellPrice = parseFloat(document.getElementById('sellPrice').value);
            const sellQuantity = parseInt(document.getElementById('sellQuantity').value);
            
            if (isNaN(sellPrice) || isNaN(sellQuantity) || sellPrice <= 0 || sellQuantity <= 0) {
                showAlert('ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ù‚ÙŠÙ… ØµØ­ÙŠØ­Ø©', 'danger');
                return;
            }
            
            if (sellQuantity > product.quantity) {
                showAlert('Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØºÙŠØ± Ù…ØªØ§Ø­Ø©', 'danger');
                return;
            }
            
            const cost = product.wholesalePrice * sellQuantity;
            const revenue = sellPrice * sellQuantity;
            const profit = revenue - cost;
            
            const oldQuantity = product.quantity;
            
            product.quantity -= sellQuantity;
            monthlyProfit += profit;
            
            logOperation('sale', product, sellQuantity, sellPrice, revenue, profit, oldQuantity);
            
            if (product.quantity === 0) {
                products = products.filter(p => p.id !== product.id);
                document.getElementById('productDetails').style.display = 'none';
            }
            
            saveToLocalStorage();
            updateDashboard();
            renderProductsTable();
            closeModal();
            
            if (document.getElementById('searchResults').style.display === 'block') {
                renderSearchResults(searchResults);
            }
            
            showAlert(`ØªÙ… Ø§Ù„Ø¨ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­! Ø§Ù„Ø±Ø¨Ø­: ${profit.toFixed(2)} $`, 'success');
        }

        // =============================
        // Ø¥Ø¶Ø§ÙØ© Ù‚Ø·Ø¹Ø© Ù„Ù„Ù…Ù†ØªØ¬
        // =============================
        function addPiece() {
            console.log('Ø¥Ø¶Ø§ÙØ© Ù‚Ø·Ø¹Ø© Ù„Ù„Ù…Ù†ØªØ¬:', selectedProductId);
            if (!selectedProductId) return;
            
            const product = products.find(p => p.id === selectedProductId);
            if (!product) return;
            
            const oldQuantity = product.quantity;
            product.quantity++;
            
            logOperation('add', product, 1, product.retailPrice, 0, 0, oldQuantity);
            
            saveToLocalStorage();
            updateDashboard();
            renderProductsTable();
            showProductDetails(selectedProductId);
            showAlert('ØªÙ… Ø¥Ø¶Ø§ÙØ© Ù‚Ø·Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // =============================
        // Ø¥Ø²Ø§Ù„Ø© Ù‚Ø·Ø¹Ø© Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬
        // =============================
        function removePiece() {
            console.log('Ø¥Ø²Ø§Ù„Ø© Ù‚Ø·Ø¹Ø© Ù…Ù† Ø§Ù„Ù…Ù†ØªØ¬:', selectedProductId);
            if (!selectedProductId) return;
            
            const product = products.find(p => p.id === selectedProductId);
            if (!product) return;
            
            const oldQuantity = product.quantity;
            
            if (product.quantity <= 1) {
                if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ')) {
                    logOperation('remove', product, product.quantity, product.retailPrice, 0, 0, oldQuantity);
                    products = products.filter(p => p.id !== selectedProductId);
                    document.getElementById('productDetails').style.display = 'none';
                }
            } else {
                product.quantity--;
                logOperation('remove', product, 1, product.retailPrice, 0, 0, oldQuantity);
            }
            
            saveToLocalStorage();
            updateDashboard();
            renderProductsTable();
            
            if (products.find(p => p.id === selectedProductId)) {
                showProductDetails(selectedProductId);
            }
            
            showAlert('ØªÙ… Ø¥Ø²Ø§Ù„Ø© Ù‚Ø·Ø¹Ø© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // =============================
        // Ø­Ø°Ù Ù…Ù†ØªØ¬
        // =============================
        function deleteProduct(productId) {
            console.log('Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬:', productId);
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù…Ù†ØªØ¬ØŸ')) {
                const product = products.find(p => p.id === productId);
                if (product) {
                    logOperation('remove', product, product.quantity, product.retailPrice, 0, 0, product.quantity);
                }
                
                products = products.filter(p => p.id !== productId);
                if (selectedProductId === productId) {
                    document.getElementById('productDetails').style.display = 'none';
                }
                saveToLocalStorage();
                updateDashboard();
                renderProductsTable();
                showAlert('ØªÙ… Ø­Ø°Ù Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
            }
        }

        // =============================
        // Ø±ÙØ¹ ÙˆÙ…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„ÙØ§Øª
        // =============================
        function previewFile() {
            console.log('Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù...');
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            
            if (!file) {
                return;
            }

            const fileName = file.name.toLowerCase();
            const isCSV = fileName.endsWith('.csv');
            const isExcel = fileName.endsWith('.xlsx') || fileName.endsWith('.xls');

            if (!isCSV && !isExcel) {
                showAlert('Ø§Ù„Ù…Ù„Ù ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù CSV Ø£Ùˆ Excel', 'danger');
                fileInput.value = '';
                return;
            }

            document.getElementById('loading').style.display = 'block';
            document.getElementById('filePreview').style.display = 'none';

            const reader = new FileReader();
            
            reader.onload = function(e) {
                try {
                    let data;
                    
                    if (isExcel) {
                        const workbook = XLSX.read(e.target.result, { type: 'binary' });
                        const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
                        data = XLSX.utils.sheet_to_json(firstSheet, { header: 1 });
                    } else {
                        const content = e.target.result;
                        data = content.split('\n').map(line => line.split(','));
                    }

                    if (data.length < 2) {
                        showAlert('Ø§Ù„Ù…Ù„Ù Ù„Ø§ ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ÙƒØ§ÙÙŠØ©', 'danger');
                        document.getElementById('loading').style.display = 'none';
                        return;
                    }

                    const headers = data[0].map(h => h.toString().trim());
                    
                    const headerMapping = {
                        'Ø§Ù„Ø§Ø³Ù…': 'name', 'Ø§Ø³Ù…': 'name', 'name': 'name', 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬': 'name',
                        'Ø§Ù„ÙˆØµÙ': 'description', 'ÙˆØµÙ': 'description', 'description': 'description',
                        'Ø³Ø¹Ø±_Ø§Ù„Ø¬Ù…Ù„Ø©': 'wholesalePrice', 'Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©': 'wholesalePrice', 'wholesalePrice': 'wholesalePrice',
                        'Ø³Ø¹Ø±_Ø§Ù„Ø¨ÙŠØ¹': 'retailPrice', 'Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹': 'retailPrice', 'retailPrice': 'retailPrice',
                        'Ø§Ù„ÙƒÙ…ÙŠØ©': 'quantity', 'ÙƒÙ…ÙŠØ©': 'quantity', 'quantity': 'quantity'
                    };

                    const columnMap = {};
                    headers.forEach((header, index) => {
                        const normalizedHeader = header.trim().toLowerCase();
                        for (const [key, value] of Object.entries(headerMapping)) {
                            if (normalizedHeader.includes(key.toLowerCase())) {
                                columnMap[value] = index;
                                break;
                            }
                        }
                    });

                    const requiredColumns = ['name', 'description', 'wholesalePrice', 'retailPrice', 'quantity'];
                    const missingColumns = requiredColumns.filter(col => columnMap[col] === undefined);

                    if (missingColumns.length > 0) {
                        showAlert(`Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© Ø§Ù„Ù…ÙÙ‚ÙˆØ¯Ø©: ${missingColumns.join(', ')}`, 'danger');
                        document.getElementById('loading').style.display = 'none';
                        return;
                    }

                    fileData = [];
                    for (let i = 1; i < data.length; i++) {
                        if (data[i].length < 5 || data[i].every(cell => cell === '')) continue;
                        
                        const product = {
                            name: data[i][columnMap['name']]?.toString().trim() || '',
                            description: data[i][columnMap['description']]?.toString().trim() || '',
                            wholesalePrice: parseFloat(data[i][columnMap['wholesalePrice']]) || 0,
                            retailPrice: parseFloat(data[i][columnMap['retailPrice']]) || 0,
                            quantity: parseInt(data[i][columnMap['quantity']]) || 0
                        };
                        
                        if (product.name && !isNaN(product.wholesalePrice) && !isNaN(product.retailPrice) && !isNaN(product.quantity)) {
                            fileData.push(product);
                        }
                    }

                    if (fileData.length === 0) {
                        showAlert('Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª ØµØ­ÙŠØ­Ø© ÙÙŠ Ø§Ù„Ù…Ù„Ù', 'danger');
                        document.getElementById('loading').style.display = 'none';
                        return;
                    }

                    const fileType = isExcel ? 'Excel' : 'CSV';
                    document.getElementById('fileInfo').innerHTML = `
                        <strong><i class="fas fa-file"></i> Ø§Ø³Ù… Ø§Ù„Ù…Ù„Ù:</strong> ${file.name}<br>
                        <strong><i class="fas fa-file-alt"></i> Ù†ÙˆØ¹ Ø§Ù„Ù…Ù„Ù:</strong> ${fileType}<br>
                        <strong><i class="fas fa-boxes"></i> Ø¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª:</strong> ${fileData.length}<br>
                        <strong><i class="fas fa-weight"></i> Ø§Ù„Ø­Ø¬Ù…:</strong> ${(file.size / 1024).toFixed(2)} ÙƒÙŠÙ„ÙˆØ¨Ø§ÙŠØª
                    `;
                    document.getElementById('fileInfo').style.display = 'block';

                    const previewDiv = document.getElementById('filePreview');
                    let previewHTML = `
                        <table>
                            <thead>
                                <tr>
                                    <th>#</th>
                                    <th>Ø§Ù„Ø§Ø³Ù…</th>
                                    <th>Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø©</th>
                                    <th>Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹</th>
                                    <th>Ø§Ù„ÙƒÙ…ÙŠØ©</th>
                                </tr>
                            </thead>
                            <tbody>
                    `;

                    fileData.forEach((product, index) => {
                        previewHTML += `
                            <tr>
                                <td>${index + 1}</td>
                                <td>${product.name}</td>
                                <td>${product.wholesalePrice.toFixed(2)} $</td>
                                <td>${product.retailPrice.toFixed(2)} $</td>
                                <td>${product.quantity}</td>
                            </tr>
                        `;
                    });

                    previewHTML += '</tbody></table>';
                    previewDiv.innerHTML = previewHTML;
                    
                    document.getElementById('loading').style.display = 'none';
                    previewDiv.style.display = 'block';

                    document.getElementById('importFileBtn').disabled = false;
                    
                    showAlert(`ØªÙ… ØªØ­Ù…ÙŠÙ„ ${fileData.length} Ù…Ù†ØªØ¬ Ø¨Ù†Ø¬Ø§Ø­ Ù…Ù† Ù…Ù„Ù ${fileType}`, 'success');
                    
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ù…Ù„Ù:', error);
                    showAlert('Ø­Ø¯Ø« Ø®Ø·Ø£ ÙÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„Ù…Ù„Ù. ÙŠØ±Ø¬Ù‰ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† ØªÙ†Ø³ÙŠÙ‚Ù‡', 'danger');
                    document.getElementById('loading').style.display = 'none';
                }
            };
            
            if (isExcel) {
                reader.readAsBinaryString(file);
            } else {
                reader.readAsText(file, 'UTF-8');
            }
        }

        function importFile() {
            console.log('Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø§Ù„Ù…Ù„Ù...');
            if (fileData.length === 0) {
                showAlert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯', 'danger');
                return;
            }

            if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${fileData.length} Ù…Ù†ØªØ¬ØŸ`)) {
                return;
            }

            let importedCount = 0;
            let updatedCount = 0;
            let skippedCount = 0;

            fileData.forEach(productData => {
                const existingProductIndex = products.findIndex(p => p.name === productData.name);
                
                if (existingProductIndex === -1) {
                    const product = {
                        id: generateId(),
                        name: productData.name,
                        description: productData.description,
                        wholesalePrice: productData.wholesalePrice,
                        retailPrice: productData.retailPrice,
                        quantity: productData.quantity,
                        dateAdded: new Date().toISOString()
                    };
                    
                    products.push(product);
                    importedCount++;
                    logOperation('import', product, productData.quantity, productData.retailPrice, 0, 0);
                } else {
                    if (confirm(`Ø§Ù„Ù…Ù†ØªØ¬ "${productData.name}" Ù…ÙˆØ¬ÙˆØ¯ Ø¨Ø§Ù„ÙØ¹Ù„. Ù‡Ù„ ØªØ±ÙŠØ¯ ØªØ­Ø¯ÙŠØ«Ù‡ØŸ`)) {
                        const product = products[existingProductIndex];
                        product.description = productData.description || product.description;
                        product.wholesalePrice = productData.wholesalePrice || product.wholesalePrice;
                        product.retailPrice = productData.retailPrice || product.retailPrice;
                        product.quantity = productData.quantity || product.quantity;
                        updatedCount++;
                        logOperation('edit', product, productData.quantity, productData.retailPrice, 0, 0);
                    } else {
                        skippedCount++;
                    }
                }
            });

            saveToLocalStorage();
            updateDashboard();
            renderProductsTable();
            clearFilePreview();
            
            let message = '';
            if (importedCount > 0) message += `ØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ ${importedCount} Ù…Ù†ØªØ¬ Ø¬Ø¯ÙŠØ¯<br>`;
            if (updatedCount > 0) message += `ØªÙ… ØªØ­Ø¯ÙŠØ« ${updatedCount} Ù…Ù†ØªØ¬<br>`;
            if (skippedCount > 0) message += `ØªÙ… ØªØ®Ø·ÙŠ ${skippedCount} Ù…Ù†ØªØ¬`;
            
            showAlert(message || 'Ù„Ù… ÙŠØªÙ… Ø§Ø³ØªÙŠØ±Ø§Ø¯ Ø£ÙŠ Ø¨ÙŠØ§Ù†Ø§Øª', 
                     importedCount > 0 ? 'success' : 'info');
        }

        function clearFilePreview() {
            console.log('Ù…Ø³Ø­ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù...');
            document.getElementById('fileInput').value = '';
            document.getElementById('fileInfo').style.display = 'none';
            document.getElementById('filePreview').style.display = 'none';
            document.getElementById('importFileBtn').disabled = true;
            fileData = [];
            showAlert('ØªÙ… Ù…Ø³Ø­ Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„Ù…Ù„Ù', 'info');
        }

        // =============================
        // Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
        // =============================
        function logOperation(type, product, quantity, price, revenue = 0, profit = 0, oldQuantity = null) {
            const operation = {
                id: generateOperationId(),
                type: type,
                productId: product.id,
                productName: product.name,
                quantity: quantity,
                price: price,
                revenue: revenue,
                profit: profit,
                oldQuantity: oldQuantity,
                timestamp: new Date().toISOString(),
                date: new Date().toLocaleDateString('ar-SA'),
                time: new Date().toLocaleTimeString('ar-SA')
            };
            
            operationsHistory.unshift(operation);
            console.log('ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:', operation);
            
            saveToLocalStorage();
            updateOperationsStatistics();
            renderOperationsTable();
        }

        function revertOperation(operationId) {
            console.log('Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©:', operationId);
            const operationIndex = operationsHistory.findIndex(op => op.id === operationId);
            if (operationIndex === -1) return;
            
            const operation = operationsHistory[operationIndex];
            
            if (!confirm(`Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© ${getOperationTypeArabic(operation.type)} Ù„Ù„Ù…Ù†ØªØ¬ "${operation.productName}"ØŸ`)) {
                return;
            }
            
            const product = products.find(p => p.id === operation.productId);
            
            switch (operation.type) {
                case 'sale':
                    if (product) {
                        product.quantity += operation.quantity;
                        monthlyProfit -= operation.profit;
                    } else {
                        const newProduct = {
                            id: operation.productId,
                            name: operation.productName,
                            description: 'ØªÙ… Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ù…Ù†ØªØ¬ Ø¨Ø¹Ø¯ Ø¥Ù„ØºØ§Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø§Ù„Ø¨ÙŠØ¹',
                            wholesalePrice: operation.price * 0.7,
                            retailPrice: operation.price,
                            quantity: operation.quantity,
                            dateAdded: new Date().toISOString()
                        };
                        products.push(newProduct);
                        monthlyProfit -= operation.profit;
                    }
                    break;
                    
                case 'add':
                    if (product && operation.oldQuantity !== null) {
                        product.quantity = operation.oldQuantity;
                    }
                    break;
                    
                case 'remove':
                    if (product && operation.oldQuantity !== null) {
                        product.quantity = operation.oldQuantity;
                    }
                    break;
                    
                case 'edit':
                case 'import':
                    break;
            }
            
            operationsHistory.splice(operationIndex, 1);
            
            const revertOperation = {
                id: generateOperationId(),
                type: 'revert',
                originalOperationId: operationId,
                productId: operation.productId,
                productName: operation.productName,
                quantity: operation.quantity,
                price: operation.price,
                revenue: operation.revenue,
                profit: operation.profit,
                timestamp: new Date().toISOString(),
                date: new Date().toLocaleDateString('ar-SA'),
                time: new Date().toLocaleTimeString('ar-SA')
            };
            
            operationsHistory.unshift(revertOperation);
            
            saveToLocalStorage();
            updateDashboard();
            renderProductsTable();
            updateOperationsStatistics();
            renderOperationsTable();
            
            showAlert('ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function filterOperations() {
            renderOperationsTable();
        }

        function clearOperationsFilters() {
            document.getElementById('operationTypeFilter').value = 'all';
            document.getElementById('dateFilter').value = 'all';
            renderOperationsTable();
            showAlert('ØªÙ… Ù…Ø³Ø­ Ø§Ù„ÙÙ„Ø§ØªØ±', 'info');
        }

        function renderOperationsTable() {
            const tbody = document.getElementById('operationsTableBody');
            tbody.innerHTML = '';

            if (operationsHistory.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="9">
                            <div class="empty-state">
                                <i class="fas fa-history"></i>
                                <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù…Ø³Ø¬Ù„Ø©</h3>
                                <p>Ù‚Ù… Ø¨ØªÙ†ÙÙŠØ° Ø¹Ù…Ù„ÙŠØ§Øª (Ø¨ÙŠØ¹ØŒ Ø¥Ø¶Ø§ÙØ©ØŒ Ø¥Ø²Ø§Ù„Ø©) Ù„Ø¨Ø¯Ø¡ Ø§Ù„ØªØ³Ø¬ÙŠÙ„</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            const typeFilter = document.getElementById('operationTypeFilter').value;
            const dateFilter = document.getElementById('dateFilter').value;
            const now = new Date();
            const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);

            const filteredOperations = operationsHistory.filter(operation => {
                if (typeFilter !== 'all' && operation.type !== typeFilter) {
                    return false;
                }

                const operationDate = new Date(operation.timestamp);
                const operationDay = new Date(operationDate.getFullYear(), operationDate.getMonth(), operationDate.getDate());

                switch (dateFilter) {
                    case 'today':
                        return operationDay.getTime() === today.getTime();
                    case 'yesterday':
                        return operationDay.getTime() === yesterday.getTime();
                    case 'week':
                        const weekAgo = new Date(today);
                        weekAgo.setDate(weekAgo.getDate() - 7);
                        return operationDate >= weekAgo;
                    case 'month':
                        const monthAgo = new Date(today);
                        monthAgo.setMonth(monthAgo.getMonth() - 1);
                        return operationDate >= monthAgo;
                    default:
                        return true;
                }
            });

            filteredOperations.forEach((operation, index) => {
                const row = document.createElement('tr');
                
                let badgeClass = '';
                let operationTypeText = '';
                
                switch (operation.type) {
                    case 'sale': badgeClass = 'badge-sale'; operationTypeText = 'Ø¨ÙŠØ¹'; break;
                    case 'add': badgeClass = 'badge-add'; operationTypeText = 'Ø¥Ø¶Ø§ÙØ©'; break;
                    case 'remove': badgeClass = 'badge-remove'; operationTypeText = 'Ø¥Ø²Ø§Ù„Ø©'; break;
                    case 'edit': badgeClass = 'badge-edit'; operationTypeText = 'ØªØ¹Ø¯ÙŠÙ„'; break;
                    case 'import': badgeClass = 'badge-import'; operationTypeText = 'Ø§Ø³ØªÙŠØ±Ø§Ø¯'; break;
                    case 'revert': badgeClass = 'badge-danger'; operationTypeText = 'Ø¥Ù„ØºØ§Ø¡'; break;
                }
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>
                        <span class="operation-badge ${badgeClass}">${operationTypeText}</span>
                    </td>
                    <td>
                        <strong>${operation.productName}</strong>
                        <div class="operation-details">${operation.productId}</div>
                    </td>
                    <td>${operation.quantity}</td>
                    <td>${operation.price.toFixed(2)} $</td>
                    <td>${operation.revenue > 0 ? operation.revenue.toFixed(2) + ' $' : '-'}</td>
                    <td>${operation.profit > 0 ? operation.profit.toFixed(2) + ' $' : (operation.profit < 0 ? operation.profit.toFixed(2) + ' $' : '-')}</td>
                    <td>
                        <strong>${operation.date}</strong>
                        <div class="operation-details">${operation.time}</div>
                    </td>
                    <td>
                        ${operation.type !== 'revert' ? `<button onclick="revertOperation('${operation.id}')" class="operation-revert" title="Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©">
                            <i class="fas fa-undo"></i> Ø¥Ù„ØºØ§Ø¡
                        </button>` : 'ØªÙ… Ø§Ù„Ø¥Ù„ØºØ§Ø¡'}
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function updateOperationsStatistics() {
            const totalOps = operationsHistory.length;
            const salesOps = operationsHistory.filter(op => op.type === 'sale').length;
            const totalProfit = operationsHistory.filter(op => op.type === 'sale')
                .reduce((sum, op) => sum + op.profit, 0);
            const totalRevenue = operationsHistory.filter(op => op.type === 'sale')
                .reduce((sum, op) => sum + op.revenue, 0);

            document.getElementById('totalOperations').textContent = totalOps;
            document.getElementById('salesCount').textContent = salesOps;
            document.getElementById('profitTotal').innerHTML = totalProfit.toFixed(2) + ' <span class="currency">$</span>';
            document.getElementById('revenueTotal').innerHTML = totalRevenue.toFixed(2) + ' <span class="currency">$</span>';
        }

        function clearAllOperations() {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡Ø§.')) {
                return;
            }

            operationsHistory = [];
            saveToLocalStorage();
            updateOperationsStatistics();
            renderOperationsTable();
            
            showAlert('ØªÙ… Ø­Ø°Ù Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        // =============================
        // Ø§Ù„ØªØµØ¯ÙŠØ± ÙˆØ§Ù„Ø§Ø³ØªÙŠØ±Ø§Ø¯
        // =============================
        function downloadSampleCSV() {
            console.log('ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ CSV...');
            const sampleData = `Ø§Ù„Ø§Ø³Ù…,Ø§Ù„ÙˆØµÙ,Ø³Ø¹Ø±_Ø§Ù„Ø¬Ù…Ù„Ø©,Ø³Ø¹Ø±_Ø§Ù„Ø¨ÙŠØ¹,Ø§Ù„ÙƒÙ…ÙŠØ©
Ø³Ù…Ø§Ø¹Ø© Ø±Ø£Ø³ Ø¨Ù„ÙˆØªÙˆØ«,Ø³Ù…Ø§Ø¹Ø© Ø±Ø£Ø³ Ù„Ø§Ø³Ù„ÙƒÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©,150,250,10
Ù‡Ø§ØªÙ Ø°ÙƒÙŠ,Ù‡Ø§ØªÙ Ø°ÙƒÙŠ Ø¨Ø´Ø§Ø´Ø© 6.5 Ø¨ÙˆØµØ©,800,1200,5
Ù„Ø§Ø¨ØªÙˆØ¨,Ù„Ø§Ø¨ØªÙˆØ¨ 15 Ø¨ÙˆØµØ© Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬ i7,2000,2800,3
Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ,Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ Ù…Ø¹ ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø¶ÙˆØ¡,30,50,20`;

            const blob = new Blob(['\ufeff' + sampleData], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'Ù†Ù…ÙˆØ°Ø¬_Ù…Ù†ØªØ¬Ø§Øª.csv';
            link.click();
            URL.revokeObjectURL(url);
            
            showAlert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù†Ù…ÙˆØ°Ø¬ Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function downloadSampleExcel() {
            console.log('ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Excel...');
            const sampleData = [
                ['Ø§Ù„Ø§Ø³Ù…', 'Ø§Ù„ÙˆØµÙ', 'Ø³Ø¹Ø±_Ø§Ù„Ø¬Ù…Ù„Ø©', 'Ø³Ø¹Ø±_Ø§Ù„Ø¨ÙŠØ¹', 'Ø§Ù„ÙƒÙ…ÙŠØ©'],
                ['Ø³Ù…Ø§Ø¹Ø© Ø±Ø£Ø³ Ø¨Ù„ÙˆØªÙˆØ«', 'Ø³Ù…Ø§Ø¹Ø© Ø±Ø£Ø³ Ù„Ø§Ø³Ù„ÙƒÙŠØ© Ø¹Ø§Ù„ÙŠØ© Ø§Ù„Ø¬ÙˆØ¯Ø©', 150, 250, 10],
                ['Ù‡Ø§ØªÙ Ø°ÙƒÙŠ', 'Ù‡Ø§ØªÙ Ø°ÙƒÙŠ Ø¨Ø´Ø§Ø´Ø© 6.5 Ø¨ÙˆØµØ©', 800, 1200, 5],
                ['Ù„Ø§Ø¨ØªÙˆØ¨', 'Ù„Ø§Ø¨ØªÙˆØ¨ 15 Ø¨ÙˆØµØ© Ù…Ø¹ Ù…Ø¹Ø§Ù„Ø¬ i7', 2000, 2800, 3],
                ['Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ', 'Ù…Ø§ÙˆØ³ Ù„Ø§Ø³Ù„ÙƒÙŠ Ù…Ø¹ ØªÙ‚Ù†ÙŠØ© Ø§Ù„Ø¶ÙˆØ¡', 30, 50, 20]
            ];

            const worksheet = XLSX.utils.aoa_to_sheet(sampleData);
            const workbook = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(workbook, worksheet, 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª');
            
            const wscols = [
                {wch: 20}, {wch: 30}, {wch: 15}, {wch: 15}, {wch: 10}
            ];
            worksheet['!cols'] = wscols;

            const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });
            const blob = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'Ù†Ù…ÙˆØ°Ø¬_Ù…Ù†ØªØ¬Ø§Øª.xlsx';
            link.click();
            URL.revokeObjectURL(url);
            
            showAlert('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ù†Ù…ÙˆØ°Ø¬ Excel Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportToExcel() {
            console.log('ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel...');
            if (products.length === 0) {
                showAlert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'danger');
                return;
            }
            
            const data = [
                ['Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†'],
                [`ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµØ¯ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}`],
                [],
                ['Ù…', 'Ø§Ù„Ø§Ø³Ù…', 'Ø§Ù„ÙˆØµÙ', 'Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø© ($)', 'Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ ($)', 'Ø§Ù„ÙƒÙ…ÙŠØ©', 'Ø§Ù„Ù‚ÙŠÙ…Ø© ($)', 'Ø§Ù„Ù…Ø¹Ø±Ù', 'ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©']
            ];
            
            products.forEach((product, index) => {
                const value = product.wholesalePrice * product.quantity;
                const date = new Date(product.dateAdded).toLocaleDateString('ar-SA');
                data.push([
                    index + 1,
                    product.name,
                    product.description,
                    product.wholesalePrice,
                    product.retailPrice,
                    product.quantity,
                    value,
                    product.id,
                    date
                ]);
            });
            
            data.push([], ['Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©:', '', '', '', '', '', monthlyProfit.toFixed(2) + ' $']);
            
            const worksheet = XLSX.utils.aoa_to_sheet(data);
            const workbook = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(workbook, worksheet, 'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª');
            
            const wscols = [
                {wch: 5}, {wch: 20}, {wch: 30}, {wch: 15}, {wch: 15}, {wch: 10}, {wch: 15}, {wch: 25}, {wch: 15}
            ];
            worksheet['!cols'] = wscols;
            
            const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });
            const blob = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `Ø¬Ø±Ø¯_Ø§Ù„Ù…Ø®Ø²ÙˆÙ†_${new Date().toISOString().split('T')[0]}.xlsx`;
            link.click();
            URL.revokeObjectURL(url);
            
            showAlert('ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportToCSV() {
            console.log('ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ CSV...');
            if (products.length === 0) {
                showAlert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'danger');
                return;
            }
            
            let csvContent = "data:text/csv;charset=utf-8,\ufeff";
            
            csvContent += "Ù†Ø¸Ø§Ù… Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†\n";
            csvContent += `ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµØ¯ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}\n\n`;
            
            csvContent += "Ù…,Ø§Ù„Ø§Ø³Ù…,Ø§Ù„ÙˆØµÙ,Ø³Ø¹Ø± Ø§Ù„Ø¬Ù…Ù„Ø© ($),Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹ ($),Ø§Ù„ÙƒÙ…ÙŠØ©,Ø§Ù„Ù‚ÙŠÙ…Ø© ($),Ø§Ù„Ù…Ø¹Ø±Ù,ØªØ§Ø±ÙŠØ® Ø§Ù„Ø¥Ø¶Ø§ÙØ©\n";
            
            products.forEach((product, index) => {
                const value = product.wholesalePrice * product.quantity;
                const date = new Date(product.dateAdded).toLocaleDateString('ar-SA');
                const row = [
                    index + 1,
                    product.name,
                    product.description,
                    product.wholesalePrice,
                    product.retailPrice,
                    product.quantity,
                    value,
                    product.id,
                    date
                ].join(',');
                
                csvContent += row + "\n";
            });
            
            csvContent += `\n\nØ§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©:,${monthlyProfit.toFixed(2)} $`;
            
            const encodedUri = encodeURI(csvContent);
            const link = document.createElement("a");
            link.setAttribute("href", encodedUri);
            link.setAttribute("download", `Ø¬Ø±Ø¯_Ø§Ù„Ù…Ø®Ø²ÙˆÙ†_${new Date().toISOString().split('T')[0]}.csv`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showAlert('ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ CSV Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportToJSON() {
            console.log('ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ JSON...');
            if (products.length === 0) {
                showAlert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¨ÙŠØ§Ù†Ø§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'danger');
                return;
            }
            
            const data = {
                products: products,
                monthlyProfit: monthlyProfit,
                operationsHistory: operationsHistory,
                exportDate: new Date().toISOString(),
                currency: "USD"
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const link = document.createElement("a");
            link.setAttribute("href", dataUri);
            link.setAttribute("download", `Ø¬Ø±Ø¯_Ø§Ù„Ù…Ø®Ø²ÙˆÙ†_${new Date().toISOString().split('T')[0]}.json`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showAlert('ØªÙ… Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ JSON Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportBackup() {
            console.log('ØªØµØ¯ÙŠØ± Ù†Ø³Ø®Ø© Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©...');
            const data = {
                products: products,
                monthlyProfit: monthlyProfit,
                operationsHistory: operationsHistory,
                settings: {
                    lastExport: new Date().toISOString(),
                    version: "3.0",
                    currency: "USD"
                }
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const link = document.createElement("a");
            link.setAttribute("href", dataUri);
            link.setAttribute("download", `Ù†Ø³Ø®Ø©_Ø§Ø­ØªÙŠØ§Ø·ÙŠØ©_${new Date().toISOString().split('T')[0]}.json`);
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showAlert('ØªÙ… ØªØµØ¯ÙŠØ± Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªÙŠØ§Ø·ÙŠØ© Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportOperationsToExcel() {
            console.log('ØªØµØ¯ÙŠØ± Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¥Ù„Ù‰ Excel...');
            if (operationsHistory.length === 0) {
                showAlert('Ù„Ø§ ØªÙˆØ¬Ø¯ Ø¹Ù…Ù„ÙŠØ§Øª Ù„Ù„ØªØµØ¯ÙŠØ±', 'danger');
                return;
            }

            const data = [
                ['Ø³Ø¬Ù„ Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…'],
                [`ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØµØ¯ÙŠØ±: ${new Date().toLocaleDateString('ar-SA')}`],
                [],
                ['Ù…', 'Ù†ÙˆØ¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ©', 'Ø§Ø³Ù… Ø§Ù„Ù…Ù†ØªØ¬', 'Ø§Ù„Ù…Ø¹Ø±Ù', 'Ø§Ù„ÙƒÙ…ÙŠØ©', 'Ø§Ù„Ø³Ø¹Ø±', 'Ø§Ù„Ø¥ÙŠØ±Ø§Ø¯', 'Ø§Ù„Ø±Ø¨Ø­', 'Ø§Ù„ØªØ§Ø±ÙŠØ®', 'Ø§Ù„ÙˆÙ‚Øª']
            ];

            operationsHistory.forEach((operation, index) => {
                data.push([
                    index + 1,
                    getOperationTypeArabic(operation.type),
                    operation.productName,
                    operation.productId,
                    operation.quantity,
                    operation.price.toFixed(2),
                    operation.revenue.toFixed(2),
                    operation.profit.toFixed(2),
                    operation.date,
                    operation.time
                ]);
            });

            const worksheet = XLSX.utils.aoa_to_sheet(data);
            const workbook = XLSX.utils.book_new();
            XLSX.utils.book_append_sheet(workbook, worksheet, 'Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª');

            const excelBuffer = XLSX.write(workbook, { bookType: 'xlsx', type: 'array' });
            const blob = new Blob([excelBuffer], { type: 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet' });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `Ø³Ø¬Ù„_Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª_${new Date().toISOString().split('T')[0]}.xlsx`;
            link.click();
            URL.revokeObjectURL(url);

            showAlert('ØªÙ… ØªØµØ¯ÙŠØ± Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¨Ù†Ø¬Ø§Ø­', 'success');
        }

        function exportOperationsToPDF() {
            showAlert('Ù„ØªØµØ¯ÙŠØ± PDFØŒ Ø§Ù„Ø±Ø¬Ø§Ø¡ ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel Ø«Ù… Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù…Ù† Ø¨Ø±Ù†Ø§Ù…Ø¬ Excel', 'info');
        }

        function printOperations() {
            window.print();
        }

        // =============================
        // ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø©
        // =============================
        function generateId() {
            return 'PROD-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        }

        function generateOperationId() {
            return 'OP-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
        }

        function getOperationTypeArabic(type) {
            const types = {
                'sale': 'Ø¨ÙŠØ¹',
                'add': 'Ø¥Ø¶Ø§ÙØ©',
                'remove': 'Ø¥Ø²Ø§Ù„Ø©',
                'edit': 'ØªØ¹Ø¯ÙŠÙ„',
                'import': 'Ø§Ø³ØªÙŠØ±Ø§Ø¯',
                'revert': 'Ø¥Ù„ØºØ§Ø¡'
            };
            return types[type] || type;
        }

        function updateDashboard() {
            let totalCapital = 0;
            let totalProducts = products.length;
            let marketValue = 0;
            
            products.forEach(product => {
                totalCapital += product.wholesalePrice * product.quantity;
                marketValue += product.retailPrice * product.quantity;
            });
            
            document.getElementById('totalCapital').innerHTML = totalCapital.toFixed(2) + ' <span class="currency">$</span>';
            document.getElementById('monthlyProfit').innerHTML = monthlyProfit.toFixed(2) + ' <span class="currency">$</span>';
            document.getElementById('totalProducts').textContent = totalProducts + ' Ù…Ù†ØªØ¬';
            document.getElementById('marketValue').innerHTML = marketValue.toFixed(2) + ' <span class="currency">$</span>';
            
            const profitElement = document.getElementById('monthlyProfit');
            profitElement.className = monthlyProfit >= 0 ? 'value' : 'value negative';
        }

        function renderProductsTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';

            if (products.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8">
                            <div class="empty-state">
                                <i class="fas fa-box-open"></i>
                                <h3>Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù†ØªØ¬Ø§Øª ÙÙŠ Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</h3>
                                <p>Ù‚Ù… Ø¨Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬Ø§Øª Ø¬Ø¯ÙŠØ¯Ø© Ù„Ø¨Ø¯Ø¡ Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù…Ø®Ø²ÙˆÙ†</p>
                            </div>
                        </td>
                    </tr>
                `;
                return;
            }

            products.forEach((product, index) => {
                const totalValue = product.wholesalePrice * product.quantity;
                const row = document.createElement('tr');
                
                let retailPriceCell = '';
                if (showRetailPrice) {
                    retailPriceCell = `<td>${product.retailPrice.toFixed(2)} $</td>`;
                } else {
                    retailPriceCell = `<td style="display: none;">${product.retailPrice.toFixed(2)} $</td>`;
                }
                
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${product.name}</td>
                    <td title="${product.description}">${product.description.length > 20 ? product.description.substring(0, 20) + '...' : product.description}</td>
                    <td>${product.wholesalePrice.toFixed(2)} $</td>
                    ${retailPriceCell}
                    <td>${product.quantity}</td>
                    <td>${totalValue.toFixed(2)} $</td>
                    <td>
                        <div class="mobile-actions">
                            <button onclick="showProductDetails('${product.id}')" class="btn btn-primary">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button onclick="deleteProduct('${product.id}')" class="btn btn-danger">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </td>
                `;
                
                tbody.appendChild(row);
            });
        }

        function showAlert(message, type) {
            const alertDiv = document.getElementById('alertMessage');
            alertDiv.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'danger' ? 'exclamation-circle' : 'info-circle'}"></i>
                ${message}
            `;
            alertDiv.className = `alert alert-${type}`;
            alertDiv.style.display = 'block';
            
            setTimeout(() => {
                alertDiv.style.display = 'none';
            }, 3000);
        }

        function saveToLocalStorage() {
            const data = {
                products: products,
                monthlyProfit: monthlyProfit,
                operationsHistory: operationsHistory,
                showRetailPrice: showRetailPrice,
                currency: "USD"
            };
            localStorage.setItem('inventoryData', JSON.stringify(data));
            console.log('ØªÙ… Ø§Ù„Ø­ÙØ¸ ÙÙŠ LocalStorage');
        }

        function loadFromLocalStorage() {
            const savedData = localStorage.getItem('inventoryData');
            if (savedData) {
                try {
                    const data = JSON.parse(savedData);
                    products = data.products || [];
                    monthlyProfit = data.monthlyProfit || 0;
                    operationsHistory = data.operationsHistory || [];
                    showRetailPrice = data.showRetailPrice !== undefined ? data.showRetailPrice : true;
                    
                    // ØªØ­Ø¯ÙŠØ« ØªØ¨Ø¯ÙŠÙ„ Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹
                    document.getElementById('priceToggle').checked = showRetailPrice;
                    toggleRetailPrice();
                    
                } catch (error) {
                    console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
                }
            }
        }

        function closeModal() {
            document.getElementById('sellModal').style.display = 'none';
        }

        function clearForm() {
            document.getElementById('productName').value = '';
            document.getElementById('productDescription').value = '';
            document.getElementById('wholesalePrice').value = '';
            document.getElementById('retailPrice').value = '';
            document.getElementById('quantity').value = '';
        }

        function clearAllData() {
            if (confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§ØªØŸ Ù‡Ø°Ù‡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ© Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù†Ù‡Ø§.')) {
                products = [];
                monthlyProfit = 0;
                operationsHistory = [];
                selectedProductId = null;
                
                saveToLocalStorage();
                updateDashboard();
                renderProductsTable();
                document.getElementById('productDetails').style.display = 'none';
                
                showAlert('ØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª', 'success');
            }
        }

        // =============================
        // Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù
        // =============================
        function testAllFunctions() {
            console.log('=== Ø¨Ø¯Ø¡ Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ===');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¥Ø¶Ø§ÙØ©
            console.log('1. Ø§Ø®ØªØ¨Ø§Ø± Ø¥Ø¶Ø§ÙØ© Ù…Ù†ØªØ¬:');
            const testProduct = {
                id: 'TEST-123',
                name: 'Ù…Ù†ØªØ¬ Ø§Ø®ØªØ¨Ø§Ø±',
                description: 'ÙˆØµÙ Ø§Ù„Ù…Ù†ØªØ¬',
                wholesalePrice: 100,
                retailPrice: 150,
                quantity: 5
            };
            console.log('âœ“ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù†ØªØ¬:', testProduct);
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø«
            console.log('2. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨Ø­Ø«:');
            console.log('âœ“ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¨Ø­Ø« Ø¬Ø§Ù‡Ø²Ø©');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨ÙŠØ¹
            console.log('3. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ø¨ÙŠØ¹:');
            console.log('âœ“ ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø¨ÙŠØ¹ Ø¬Ø§Ù‡Ø²Ø©');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµØ¯ÙŠØ±
            console.log('4. Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„ØªØµØ¯ÙŠØ±:');
            console.log('âœ“ Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ Excel Ø¬Ø§Ù‡Ø²');
            console.log('âœ“ Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ CSV Ø¬Ø§Ù‡Ø²');
            console.log('âœ“ Ø§Ù„ØªØµØ¯ÙŠØ± Ø¥Ù„Ù‰ JSON Ø¬Ø§Ù‡Ø²');
            
            // Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
            console.log('5. Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª:');
            console.log('âœ“ ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¬Ø§Ù‡Ø²');
            console.log('âœ“ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø¬Ø§Ù‡Ø²');
            
            console.log('=== Ø§Ù†ØªÙ‡Ø§Ø¡ Ø§Ù„Ø§Ø®ØªØ¨Ø§Ø± Ø¨Ù†Ø¬Ø§Ø­ ===');
            showAlert('Ø¬Ù…ÙŠØ¹ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ØªØ¹Ù…Ù„ Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­!', 'success');
        }
        
        
        
        // Ù‡Ø°Ø§ Ù…Ø§ ÙŠØªÙ… Ø­ÙØ¸Ù‡ ÙÙŠ localStorage:
const data = {
    products: [],          // Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
    monthlyProfit: 0,      // Ø§Ù„Ø£Ø±Ø¨Ø§Ø­ Ø§Ù„Ø´Ù‡Ø±ÙŠØ©
    operationsHistory: [], // Ø³Ø¬Ù„ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª
    showRetailPrice: true, // Ø¥Ø¸Ù‡Ø§Ø± Ø³Ø¹Ø± Ø§Ù„Ø¨ÙŠØ¹
    currency: "USD"        // Ø§Ù„Ø¹Ù…Ù„Ø©
};

function saveToLocalStorage() {
    const data = {
        products: products,
        monthlyProfit: monthlyProfit,
        operationsHistory: operationsHistory,
        showRetailPrice: showRetailPrice,
        currency: "USD"
    };
    localStorage.setItem('inventoryData', JSON.stringify(data));
}


function loadFromLocalStorage() {
    const savedData = localStorage.getItem('inventoryData');
    if (savedData) {
        try {
            const data = JSON.parse(savedData);
            products = data.products || [];
            monthlyProfit = data.monthlyProfit || 0;
            operationsHistory = data.operationsHistory || [];
            showRetailPrice = data.showRetailPrice !== undefined ? data.showRetailPrice : true;
        } catch (error) {
            console.error('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:', error);
        }
    }
}


        // ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø± Ø³Ø±ÙŠØ¹ Ø¹Ù†Ø¯ Ø§Ù„ØªØ­Ù…ÙŠÙ„
        setTimeout(() => {
            console.log('Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø¬Ø§Ù‡Ø² Ù„Ù„Ø§Ø³ØªØ®Ø¯Ø§Ù…!');
            console.log('Ù„ØªØ´ØºÙŠÙ„ Ø§Ø®ØªØ¨Ø§Ø± ÙƒØ§Ù…Ù„ØŒ Ø§Ø³ØªØ¯Ø¹Ù testAllFunctions()');
        }, 1000);
    </script>
</body>
</html>
